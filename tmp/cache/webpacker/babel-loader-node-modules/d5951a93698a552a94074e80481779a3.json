{"ast":null,"code":"var Utils = {\n  getShortDate: function getShortDate(timestamp) {\n    var distance = Math.round((+new Date() - timestamp) / 60000);\n    var date = new Date(timestamp);\n    var hour = \"0\".concat(date.getHours()).slice(-2);\n    var minutes = \"0\".concat(date.getMinutes()).slice(-2);\n\n    if (distance > 2879) {\n      if (distance > 14567) {\n        return this.getNiceDate(timestamp);\n      } else {\n        return \"\\u0412\\u0447\\u0435\\u0440\\u0430 \\u0432 \".concat(hour, \":\").concat(minutes);\n      }\n    } else {\n      return \"\".concat(hour, \":\").concat(minutes);\n    }\n  },\n  getNiceDate: function getNiceDate(timestamp) {\n    var defaultString = '%d %f%y at %h:%i';\n    var language = {\n      0: 'Сейчас',\n      1: '1 минуту назад',\n      59: '%distance минут назад',\n      118: 'Час назад',\n      1439: '%r часов назад',\n      2879: 'Вчера в %h:%i',\n      14567: '%l в %h:%i'\n    };\n    var days = ['Воскресенье', 'Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота'];\n    var months = ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'];\n    var date = new Date(timestamp);\n    var distance = Math.round((+new Date() - timestamp) / 60000);\n    var string;\n\n    for (var i in language) {\n      if (distance < i) {\n        string = language[i];\n        break;\n      }\n    }\n\n    var hour = \"0\".concat(date.getHours()).slice(-2);\n    var minutes = \"0\".concat(date.getMinutes()).slice(-2);\n    var day = days[date.getDay()];\n    var month = months[date.getMonth()];\n    var year = date.getFullYear();\n\n    if (new Date().getFullYear() === year) {\n      year = '';\n    }\n\n    if (string) {\n      var hoursAgo = Math.round(distance / 60);\n      return string.replace(/%distance/i, distance).replace(/%r/i, hoursAgo).replace(/%h/i, hour).replace(/%i/i, minutes).replace(/%l/i, day);\n    }\n\n    return defaultString.replace(/%d/i, day).replace(/%f/i, month).replace(/%y/i, year).replace(/%h/i, hour).replace(/%i/i, minutes);\n  }\n};\nexport default Utils;","map":{"version":3,"sources":["/Users/kotya/SMBD3/app/javascript/chat/components/utils.js"],"names":["Utils","getShortDate","timestamp","distance","Math","round","Date","date","hour","getHours","slice","minutes","getMinutes","getNiceDate","defaultString","language","days","months","string","i","day","getDay","month","getMonth","year","getFullYear","hoursAgo","replace"],"mappings":"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","sourcesContent":["const Utils = {\n  getShortDate(timestamp) {\n    const distance = Math.round((+new Date() - timestamp) / 60000)\n    const date = new Date(timestamp)\n\n    const hour = (`0${date.getHours()}`).slice(-2)\n    const minutes = (`0${date.getMinutes()}`).slice(-2)\n\n    if (distance > 2879) {\n      if (distance > 14567) {\n        return this.getNiceDate(timestamp)\n      } else {\n        return `Вчера в ${hour}:${minutes}`\n      }\n    } else {\n      return `${hour}:${minutes}`\n    }\n  },\n  getNiceDate(timestamp) {\n    const defaultString = '%d %f%y at %h:%i'\n\n    const language = {\n      0: 'Сейчас',\n      1: '1 минуту назад',\n      59: '%distance минут назад',\n      118: 'Час назад',\n      1439: '%r часов назад',\n      2879: 'Вчера в %h:%i',\n      14567: '%l в %h:%i',\n    }\n    const days = ['Воскресенье', 'Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота']\n    const months = ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь']\n\n    const date = new Date(timestamp)\n    const distance = Math.round((+new Date() - timestamp) / 60000)\n\n    let string\n    for (const i in language) {\n      if (distance < i) {\n        string = language[i]\n\n        break\n      }\n    }\n\n    const hour = (`0${date.getHours()}`).slice(-2)\n    const minutes = (`0${date.getMinutes()}`).slice(-2)\n    const day = days[date.getDay()]\n    const month = months[date.getMonth()]\n\n    let year = date.getFullYear()\n    if (new Date().getFullYear() === year) {\n      year = ''\n    }\n\n    if (string) {\n      const hoursAgo = Math.round(distance / 60)\n\n      return string.replace(/%distance/i, distance)\n        .replace(/%r/i, hoursAgo)\n        .replace(/%h/i, hour)\n        .replace(/%i/i, minutes)\n        .replace(/%l/i, day)\n    }\n\n    return defaultString.replace(/%d/i, day)\n      .replace(/%f/i, month)\n      .replace(/%y/i, year)\n      .replace(/%h/i, hour)\n      .replace(/%i/i, minutes)\n  },\n}\n\nexport default Utils\n"]},"metadata":{},"sourceType":"module"}